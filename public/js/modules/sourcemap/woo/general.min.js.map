{"version":3,"sources":["general.js"],"names":["$","fn","serializeArrayAll","rCRLF","this","map","elements","jQuery","makeArray","i","elem","val","type","checked","name","value","isArray","replace","get","$body","openQuickViewPopup","$popup","$button","removeClass","magnificPopup","open","mainClass","items","src","html","callbacks","$contentWrap","content","find","windowHeight","window","innerHeight","popupHeight","parseInt","Math","min","outerHeight","perfectScrollbar","suppressScrollX","$sliderWrap","thumbsSlider","children","UnicampSwiper","mainSlider","thumbs","swiper","isw","Swatches","init","wc_add_to_cart_variation_params","each","wc_variation_form","$form","variations","data","on","isFieldSelected","needReset","globalAttrs","formValues","serializeArray","length","_name","substring","selectedAttributes","Object","entries","variationImageID","minMatch","currentVariation","currentAttributes","attributes","loopMatch","forEach","key","selectedKey","selectedValue","image_id","$wrapperEl","index","slideImageID","attr","slideTo","document","ready","unicampNotices","e","preventDefault","stopPropagation","parents","first","addClass","productID","ajax","url","$unicamp","ajaxurl","param","action","pid","dataType","success","results","template","append","settings","addedText","noticeAddedCartText","messages","undefined","image","title","noticeCartUrl","noticeCartText","push","growl","location","duration","message","splice","$thisbutton","closest","item","body","trigger","woocommerce_params","wc_ajax_url","toString","beforeSend","response","complete","error","product_url","fragments","cart_hash"],"mappings":"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","file":"../../../woo/general.min.js","sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\t$.fn.serializeArrayAll = function() {\n\t\t\tvar rCRLF = /\\r?\\n/g;\n\t\t\treturn this.map( function() {\n\t\t\t\treturn this.elements ? jQuery.makeArray( this.elements ) : this;\n\t\t\t} ).map( function( i, elem ) {\n\t\t\t\tvar val = jQuery( this ).val();\n\t\t\t\tif ( val == null ) {\n\t\t\t\t\treturn val == null\n\t\t\t\t\t//next 2 lines of code look if it is a checkbox and set the value to blank\n\t\t\t\t\t//if it is unchecked\n\t\t\t\t} else if ( this.type == \"checkbox\" && this.checked == false ) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\tvalue: this.checked ? this.value : ''\n\t\t\t\t\t}\n\t\t\t\t\t//next lines are kept from default jQuery implementation and\n\t\t\t\t\t//default to all checkboxes = on\n\t\t\t\t} else {\n\t\t\t\t\treturn jQuery.isArray( val ) ?\n\t\t\t\t\t\tjQuery.map( val, function( val, i ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: elem.name,\n\t\t\t\t\t\t\t\tvalue: val.replace( rCRLF, \"\\r\\n\" )\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: elem.name,\n\t\t\t\t\t\t\tvalue: val.replace( rCRLF, \"\\r\\n\" )\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} ).get();\n\t\t};\n\n\t\tvar $body = $( 'body' );\n\n\t\t$( document ).ready( function() {\n\t\t\tinitQuickViewPopup();\n\t\t\taddToCartNotification();\n\t\t\tsingleProductAddToCart();\n\t\t} );\n\n\t\tfunction initQuickViewPopup() {\n\t\t\t$( '.unicamp-product' ).on( 'click', '.quick-view-btn', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tvar $button = $( this );\n\n\t\t\t\tvar $actions = $button.parents( '.product-actions' ).first();\n\t\t\t\t$actions.addClass( 'refresh' );\n\n\t\t\t\t$button.addClass( 'loading' );\n\t\t\t\tvar productID = $button.data( 'pid' );\n\n\t\t\t\t/**\n\t\t\t\t * Avoid duplicate ajax request.\n\t\t\t\t */\n\t\t\t\tvar $popup = $body.children( '#' + 'popup-product-quick-view-content-' + productID );\n\t\t\t\tif ( $popup.length > 0 ) {\n\t\t\t\t\topenQuickViewPopup( $popup, $button );\n\t\t\t\t} else {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\taction: 'product_quick_view',\n\t\t\t\t\t\tpid: productID\n\t\t\t\t\t};\n\n\t\t\t\t\t$.ajax( {\n\t\t\t\t\t\turl: $unicamp.ajaxurl,\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdata: $.param( data ),\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tsuccess: function( results ) {\n\t\t\t\t\t\t\t$popup = $( results.template );\n\t\t\t\t\t\t\t$body.append( $popup );\n\t\t\t\t\t\t\topenQuickViewPopup( $popup, $button );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction openQuickViewPopup( $popup, $button ) {\n\t\t\t$button.removeClass( 'loading' );\n\n\t\t\t$.magnificPopup.open( {\n\t\t\t\tmainClass: 'mfp-fade popup-product-quick-view',\n\t\t\t\titems: {\n\t\t\t\t\tsrc: $popup.html(),\n\t\t\t\t\ttype: 'inline'\n\t\t\t\t},\n\t\t\t\tcallbacks: {\n\t\t\t\t\topen: function() {\n\t\t\t\t\t\tvar $contentWrap = this.content.find( '.product-container' );\n\t\t\t\t\t\tvar windowHeight = window.innerHeight;\n\n\t\t\t\t\t\t// Max height of popup = Window height - top bottom spacing.\n\t\t\t\t\t\tvar popupHeight = parseInt( (\n\t\t\t\t\t\t\twindowHeight - 60\n\t\t\t\t\t\t) );\n\n\t\t\t\t\t\t// If window height large then used fixed height.\n\t\t\t\t\t\t// Popup max height = 760.\n\t\t\t\t\t\tpopupHeight = Math.min( popupHeight, 760 );\n\n\t\t\t\t\t\t$contentWrap.outerHeight( popupHeight );\n\n\t\t\t\t\t\t$contentWrap.perfectScrollbar( {\n\t\t\t\t\t\t\tsuppressScrollX: true\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tvar $sliderWrap = this.content.find( '.woo-single-gallery' );\n\t\t\t\t\t\tvar thumbsSlider = $sliderWrap.children( '.unicamp-thumbs-swiper' ).UnicampSwiper();\n\t\t\t\t\t\tvar mainSlider = $sliderWrap.children( '.unicamp-main-swiper' ).UnicampSwiper( {\n\t\t\t\t\t\t\tthumbs: {\n\t\t\t\t\t\t\t\tswiper: thumbsSlider\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tif ( typeof isw != 'undefined' && typeof isw.Swatches !== 'undefined' ) {\n\t\t\t\t\t\t\tisw.Swatches.init();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Re init add to cart form variation.\n\t\t\t\t\t\tif ( typeof wc_add_to_cart_variation_params !== 'undefined' ) {\n\t\t\t\t\t\t\tthis.content.find( '.variations_form' ).each( function() {\n\t\t\t\t\t\t\t\t$( this ).wc_variation_form();\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar $form = this.content.find( '.variations_form' );\n\t\t\t\t\t\tvar variations = $form.data( 'product_variations' );\n\n\t\t\t\t\t\t$form.find( 'select' ).on( 'change', function() {\n\t\t\t\t\t\t\tvar isFieldSelected = true;\n\t\t\t\t\t\t\tvar needReset = false;\n\t\t\t\t\t\t\tvar globalAttrs = {};\n\n\t\t\t\t\t\t\tvar formValues = $form.serializeArray();\n\n\t\t\t\t\t\t\t// Check all attributes selected.\n\t\t\t\t\t\t\tfor ( var i = 0; i < formValues.length; i ++ ) {\n\n\t\t\t\t\t\t\t\tvar _name = formValues[ i ].name;\n\n\t\t\t\t\t\t\t\tif ( _name.substring( 0, 10 ) === 'attribute_' ) {\n\n\t\t\t\t\t\t\t\t\tglobalAttrs[ _name ] = formValues[ i ].value;\n\n\t\t\t\t\t\t\t\t\tif ( formValues[ i ].value === '' ) {\n\t\t\t\t\t\t\t\t\t\tisFieldSelected = false;\n\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( isFieldSelected === true ) {\n\t\t\t\t\t\t\t\t// Convert to array.\n\t\t\t\t\t\t\t\tvar selectedAttributes = Object.entries( globalAttrs );\n\n\t\t\t\t\t\t\t\tvar variationImageID = 0;\n\t\t\t\t\t\t\t\tvar minMatch = 0;\n\n\t\t\t\t\t\t\t\tfor ( var i = variations.length - 1; i >= 0; i -- ) {\n\t\t\t\t\t\t\t\t\tvar currentVariation = variations[ i ];\n\t\t\t\t\t\t\t\t\tvar currentAttributes = Object.entries( currentVariation.attributes ); // Convert to array.\n\t\t\t\t\t\t\t\t\tvar loopMatch = 0;\n\n\t\t\t\t\t\t\t\t\t// Compare selected variation with all variations to find best matches.\n\t\t\t\t\t\t\t\t\tcurrentAttributes.forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\t\t\t\t\tselectedAttributes.forEach( ( [ selectedKey, selectedValue ] ) => {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( selectedKey === key ) {\n\t\t\t\t\t\t\t\t\t\t\t\tif ( selectedValue === value\n\t\t\t\t\t\t\t\t\t\t\t\t     || '' === value // Any Terms.\n\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tloopMatch ++;\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tif ( minMatch < loopMatch ) {\n\t\t\t\t\t\t\t\t\t\tminMatch = loopMatch;\n\t\t\t\t\t\t\t\t\t\tvariationImageID = currentVariation.image_id;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ( variationImageID ) {\n\t\t\t\t\t\t\t\t\tmainSlider.$wrapperEl.find( '.swiper-slide' ).each( function( index ) {\n\t\t\t\t\t\t\t\t\t\tvar slideImageID = $( this ).attr( 'data-image-id' );\n\t\t\t\t\t\t\t\t\t\tslideImageID = parseInt( slideImageID );\n\n\t\t\t\t\t\t\t\t\t\tif ( slideImageID === variationImageID ) {\n\t\t\t\t\t\t\t\t\t\t\tmainSlider.slideTo( index );\n\n\t\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tneedReset = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tneedReset = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Reset to main image.\n\t\t\t\t\t\t\tif ( needReset ) {\n\t\t\t\t\t\t\t\tvar $mainImage = mainSlider.$wrapperEl.find( '.product-main-image' );\n\t\t\t\t\t\t\t\tvar index = $mainImage.index();\n\t\t\t\t\t\t\t\tmainSlider.slideTo( index );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction addToCartNotification() {\n\t\t\tvar unicampNotices = [];\n\n\t\t\t$body.on( 'click', '.ajax_add_to_cart', function() {\n\t\t\t\tvar $addedProduct = $( this ).parents( '.cart-notification' ).first();\n\t\t\t\tvar settings = $addedProduct.data( 'notification' );\n\n\t\t\t\tvar addedText = '<span class=\"added-text\">' + $unicamp.noticeAddedCartText + '</span>';\n\t\t\t\tvar messages = addedText;\n\n\t\t\t\tif ( settings !== undefined ) {\n\t\t\t\t\tmessages = '<div class=\"product-added-cart\">';\n\t\t\t\t\tif ( '' !== settings.image ) {\n\t\t\t\t\t\tmessages += '<div class=\"product-thumbnail\"><img src=\"' + settings.image + '\" alt=\"' + settings.title + '\"/></div>'\n\t\t\t\t\t}\n\t\t\t\t\tmessages += '<div class=\"product-caption\"><h3 class=\"product-title\">' + settings.title + ' </h3>' + addedText + '</div>';\n\t\t\t\t\tmessages += '</div>'\n\t\t\t\t}\n\n\t\t\t\tmessages += '<div class=\"tm-button-wrapper btn-view-cart\"><a href=\"' + $unicamp.noticeCartUrl + '\" class=\"tm-button button-grey style-flat tm-button-xs tm-button-full-wide\">' + $unicamp.noticeCartText + '</a></div>';\n\n\t\t\t\tunicampNotices.push( messages );\n\t\t\t} );\n\n\t\t\t$body.on( 'added_to_cart', function() {\n\t\t\t\tfor ( var i = 0; i < unicampNotices.length; i ++ ) {\n\t\t\t\t\tvar messages = unicampNotices[ i ];\n\n\t\t\t\t\t$.growl( {\n\t\t\t\t\t\tlocation: 'br',\n\t\t\t\t\t\tduration: 5000,\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tmessage: messages,\n\t\t\t\t\t} );\n\n\t\t\t\t\tunicampNotices.splice( i, 1 );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction singleProductAddToCart() {\n\t\t\t$( document ).on( 'click', '.single_add_to_cart_button:not(.disabled)', function( e ) {\n\n\t\t\t\tvar $thisbutton = $( this ),\n\t\t\t\t    $form       = $thisbutton.closest( 'form.cart' ),\n\t\t\t\t    //quantity = $form.find('input[name=quantity]').val() || 1,\n\t\t\t\t    //product_id = $form.find('input[name=variation_id]').val() || $thisbutton.val(),\n\t\t\t\t    data        = $form.find( 'input:not([name=\"product_id\"]), select, button, textarea' ).serializeArrayAll() || 0;\n\n\t\t\t\t$.each( data, function( i, item ) {\n\t\t\t\t\tif ( item.name == 'add-to-cart' ) {\n\t\t\t\t\t\titem.name = 'product_id';\n\t\t\t\t\t\titem.value = $form.find( 'input[name=variation_id]' ).val() || $thisbutton.val();\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\t$( document.body ).trigger( 'adding_to_cart', [ $thisbutton, data ] );\n\n\t\t\t\t$.ajax( {\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\turl: woocommerce_params.wc_ajax_url.toString().replace( '%%endpoint%%', 'add_to_cart' ),\n\t\t\t\t\tdata: data,\n\t\t\t\t\tbeforeSend: function( response ) {\n\t\t\t\t\t\t$thisbutton.removeClass( 'added' ).addClass( 'loading updating-icon' );\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: function( response ) {\n\t\t\t\t\t\t$thisbutton.addClass( 'added' ).removeClass( 'loading updating-icon' );\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\t\tif ( response.error & response.product_url ) {\n\t\t\t\t\t\t\twindow.location = response.product_url;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$( document.body ).trigger( 'added_to_cart', [\n\t\t\t\t\t\t\tresponse.fragments,\n\t\t\t\t\t\t\tresponse.cart_hash,\n\t\t\t\t\t\t\t$thisbutton\n\t\t\t\t\t\t] );\n\t\t\t\t\t},\n\t\t\t\t} );\n\n\t\t\t\treturn false;\n\n\t\t\t} );\n\t\t}\n\t}( jQuery )\n);\n"]}