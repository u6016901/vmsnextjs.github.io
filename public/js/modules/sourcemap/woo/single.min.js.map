{"version":3,"sources":["single.js"],"names":["jQuery","document","ready","$","$sliderWrap","options","thumbsSlider","mainSlider","$form","variations","$unicamp","isSingle","postType","productFeatureStyle","find","hasClass","children","UnicampSwiper","thumbs","swiper","data","on","isFieldSelected","needReset","globalAttrs","formValues","serializeArray","i","length","_name","name","substring","value","selectedAttributes","Object","entries","variationImageID","minMatch","currentVariation","currentAttributes","attributes","loopMatch","forEach","key","selectedKey","selectedValue","image_id","$wrapperEl","each","index","slideImageID","this","attr","parseInt","slideTo"],"mappings":"AAAAA,OAAAC,UAAAC,MAAA,SAAAC,gBAKA,IAKAC,EAEAC,EAEAC,EAOAC,EACAC,EACAC,EAjBAC,SAAAC,UAAA,YAAAD,SAAAE,UAAA,WAAAF,SAAAG,sBAIAT,EAAAD,EAAA,oBAAAW,KAAA,uBAEAT,EAAA,GACAD,EAAAW,SAAA,uBACAT,EAAAF,EAAAY,SAAA,0BAAAC,gBACAZ,EAAA,CACAa,OAAA,CACAC,OAAAb,KAIAC,EAAAH,EAAAY,SAAA,wBAAAC,cAAAZ,GACAG,EAAAL,EAAA,oBACAM,EAAAD,EAAAY,KAAA,sBAEAZ,EAAAM,KAAA,UAAAO,GAAA,SAAA,WAQA,IAPA,IAAAC,GAAA,EACAC,GAAA,EACAC,EAAA,GAEAC,EAAAjB,EAAAkB,iBAGAC,EAAA,EAAAA,EAAAF,EAAAG,OAAAD,IAAA,CAEA,IAAAE,EAAAJ,EAAAE,GAAAG,KAEA,GAAA,eAAAD,EAAAE,UAAA,EAAA,MAEAP,EAAAK,GAAAJ,EAAAE,GAAAK,MAEA,KAAAP,EAAAE,GAAAK,OAAA,CACAV,GAAA,EAEA,OAKA,IAAA,IAAAA,EAAA,CAOA,IALA,IAAAW,EAAAC,OAAAC,QAAAX,GAEAY,EAAA,EACAC,EAAA,EAEAV,EAAAlB,EAAAmB,OAAA,EAAA,GAAAD,EAAAA,IAAA,CACA,IAAAW,EAAA7B,EAAAkB,GACAY,EAAAL,OAAAC,QAAAG,EAAAE,YACAC,EAAA,EAGAF,EAAAG,QAAA,CAAA,CAAAC,EAAAX,MACAC,EAAAS,QAAA,CAAA,CAAAE,EAAAC,MAEAD,IAAAD,IACAE,IAAAb,GACA,KAAAA,GAEAS,SAMAJ,EAAAI,IACAJ,EAAAI,EACAL,EAAAE,EAAAQ,UAIAV,EACA7B,EAAAwC,WAAAjC,KAAA,iBAAAkC,KAAA,SAAAC,GACA,IAAAC,EAAA/C,EAAAgD,MAAAC,KAAA,iBAGA,IAFAF,EAAAG,SAAAH,MAEAd,EAGA,OAFA7B,EAAA+C,QAAAL,IAEA,IAIA1B,GAAA,OAGAA,GAAA,EAIAA,IAEA0B,EADA1C,EAAAwC,WAAAjC,KAAA,uBACAmC,QACA1C,EAAA+C,QAAAL","file":"../../../woo/single.min.js","sourcesContent":["jQuery( document ).ready( function( $ ) {\n\t'use strict';\n\n\tinitProductImagesSlider();\n\n\tfunction initProductImagesSlider() {\n\t\tif ( ! $unicamp.isSingle || 'product' !== $unicamp.postType || $unicamp.productFeatureStyle !== 'slider' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar $sliderWrap = $( '#woo-single-info' ).find( '.woo-single-gallery' );\n\n\t\tvar options = {};\n\t\tif ( $sliderWrap.hasClass( 'has-thumbs-slider' ) ) {\n\t\t\tvar thumbsSlider = $sliderWrap.children( '.unicamp-thumbs-swiper' ).UnicampSwiper();\n\t\t\toptions = {\n\t\t\t\tthumbs: {\n\t\t\t\t\tswiper: thumbsSlider\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\tvar mainSlider = $sliderWrap.children( '.unicamp-main-swiper' ).UnicampSwiper( options );\n\t\tvar $form = $( '.variations_form' );\n\t\tvar variations = $form.data( 'product_variations' );\n\n\t\t$form.find( 'select' ).on( 'change', function() {\n\t\t\tvar isFieldSelected = true;\n\t\t\tvar needReset = false;\n\t\t\tvar globalAttrs = {};\n\n\t\t\tvar formValues = $form.serializeArray();\n\n\t\t\t// Check all attributes selected.\n\t\t\tfor ( var i = 0; i < formValues.length; i ++ ) {\n\n\t\t\t\tvar _name = formValues[ i ].name;\n\n\t\t\t\tif ( _name.substring( 0, 10 ) === 'attribute_' ) {\n\n\t\t\t\t\tglobalAttrs[ _name ] = formValues[ i ].value;\n\n\t\t\t\t\tif ( formValues[ i ].value === '' ) {\n\t\t\t\t\t\tisFieldSelected = false;\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( isFieldSelected === true ) {\n\t\t\t\t// Convert to array.\n\t\t\t\tvar selectedAttributes = Object.entries( globalAttrs );\n\n\t\t\t\tvar variationImageID = 0;\n\t\t\t\tvar minMatch = 0;\n\n\t\t\t\tfor ( var i = variations.length - 1; i >= 0; i -- ) {\n\t\t\t\t\tvar currentVariation = variations[ i ];\n\t\t\t\t\tvar currentAttributes = Object.entries( currentVariation.attributes ); // Convert to array.\n\t\t\t\t\tvar loopMatch = 0;\n\n\t\t\t\t\t// Compare selected variation with all variations to find best matches.\n\t\t\t\t\tcurrentAttributes.forEach( ( [ key, value ] ) => {\n\t\t\t\t\t\tselectedAttributes.forEach( ( [ selectedKey, selectedValue ] ) => {\n\n\t\t\t\t\t\t\tif ( selectedKey === key ) {\n\t\t\t\t\t\t\t\tif ( selectedValue === value\n\t\t\t\t\t\t\t\t     || '' === value // Any Terms.\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tloopMatch ++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( minMatch < loopMatch ) {\n\t\t\t\t\t\tminMatch = loopMatch;\n\t\t\t\t\t\tvariationImageID = currentVariation.image_id;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( variationImageID ) {\n\t\t\t\t\tmainSlider.$wrapperEl.find( '.swiper-slide' ).each( function( index ) {\n\t\t\t\t\t\tvar slideImageID = $( this ).attr( 'data-image-id' );\n\t\t\t\t\t\tslideImageID = parseInt( slideImageID );\n\n\t\t\t\t\t\tif ( slideImageID === variationImageID ) {\n\t\t\t\t\t\t\tmainSlider.slideTo( index );\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tneedReset = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tneedReset = true;\n\t\t\t}\n\n\t\t\t// Reset to main image.\n\t\t\tif ( needReset ) {\n\t\t\t\tvar $mainImage = mainSlider.$wrapperEl.find( '.product-main-image' );\n\t\t\t\tvar index = $mainImage.index();\n\t\t\t\tmainSlider.slideTo( index );\n\t\t\t}\n\t\t} );\n\t}\n} );\n"]}